from .mux16_gate import Mux16Gate, mux16_gate
from .mux4way16_gate import Mux4Way16Gate, mux4way16_gate
from src.hardware.types.bits import Bits3, Bits16


def mux8way16_gate(
    a0: int,
    a1: int,
    a2: int,
    a3: int,
    a4: int,
    a5: int,
    a6: int,
    a7: int,
    a8: int,
    a9: int,
    a10: int,
    a11: int,
    a12: int,
    a13: int,
    a14: int,
    a15: int,
    b0: int,
    b1: int,
    b2: int,
    b3: int,
    b4: int,
    b5: int,
    b6: int,
    b7: int,
    b8: int,
    b9: int,
    b10: int,
    b11: int,
    b12: int,
    b13: int,
    b14: int,
    b15: int,
    c0: int,
    c1: int,
    c2: int,
    c3: int,
    c4: int,
    c5: int,
    c6: int,
    c7: int,
    c8: int,
    c9: int,
    c10: int,
    c11: int,
    c12: int,
    c13: int,
    c14: int,
    c15: int,
    d0: int,
    d1: int,
    d2: int,
    d3: int,
    d4: int,
    d5: int,
    d6: int,
    d7: int,
    d8: int,
    d9: int,
    d10: int,
    d11: int,
    d12: int,
    d13: int,
    d14: int,
    d15: int,
    e0: int,
    e1: int,
    e2: int,
    e3: int,
    e4: int,
    e5: int,
    e6: int,
    e7: int,
    e8: int,
    e9: int,
    e10: int,
    e11: int,
    e12: int,
    e13: int,
    e14: int,
    e15: int,
    f0: int,
    f1: int,
    f2: int,
    f3: int,
    f4: int,
    f5: int,
    f6: int,
    f7: int,
    f8: int,
    f9: int,
    f10: int,
    f11: int,
    f12: int,
    f13: int,
    f14: int,
    f15: int,
    g0: int,
    g1: int,
    g2: int,
    g3: int,
    g4: int,
    g5: int,
    g6: int,
    g7: int,
    g8: int,
    g9: int,
    g10: int,
    g11: int,
    g12: int,
    g13: int,
    g14: int,
    g15: int,
    h0: int,
    h1: int,
    h2: int,
    h3: int,
    h4: int,
    h5: int,
    h6: int,
    h7: int,
    h8: int,
    h9: int,
    h10: int,
    h11: int,
    h12: int,
    h13: int,
    h14: int,
    h15: int,
    sel0: int,
    sel1: int,
    sel2: int,
):
    aceg_mux4way16 = mux4way16_gate(
        a0,
        a1,
        a2,
        a3,
        a4,
        a5,
        a6,
        a7,
        a8,
        a9,
        a10,
        a11,
        a12,
        a13,
        a14,
        a15,
        c0,
        c1,
        c2,
        c3,
        c4,
        c5,
        c6,
        c7,
        c8,
        c9,
        c10,
        c11,
        c12,
        c13,
        c14,
        c15,
        e0,
        e1,
        e2,
        e3,
        e4,
        e5,
        e6,
        e7,
        e8,
        e9,
        e10,
        e11,
        e12,
        e13,
        e14,
        e15,
        g0,
        g1,
        g2,
        g3,
        g4,
        g5,
        g6,
        g7,
        g8,
        g9,
        g10,
        g11,
        g12,
        g13,
        g14,
        g15,
        sel0,
        sel1,
    )

    bdfh_mux4way16 = mux4way16_gate(
        b0,
        b1,
        b2,
        b3,
        b4,
        b5,
        b6,
        b7,
        b8,
        b9,
        b10,
        b11,
        b12,
        b13,
        b14,
        b15,
        d0,
        d1,
        d2,
        d3,
        d4,
        d5,
        d6,
        d7,
        d8,
        d9,
        d10,
        d11,
        d12,
        d13,
        d14,
        d15,
        f0,
        f1,
        f2,
        f3,
        f4,
        f5,
        f6,
        f7,
        f8,
        f9,
        f10,
        f11,
        f12,
        f13,
        f14,
        f15,
        h0,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        h7,
        h8,
        h9,
        h10,
        h11,
        h12,
        h13,
        h14,
        h15,
        sel0,
        sel1,
    )

    return mux16_gate(
        aceg_mux4way16[0],
        aceg_mux4way16[1],
        aceg_mux4way16[2],
        aceg_mux4way16[3],
        aceg_mux4way16[4],
        aceg_mux4way16[5],
        aceg_mux4way16[6],
        aceg_mux4way16[7],
        aceg_mux4way16[8],
        aceg_mux4way16[9],
        aceg_mux4way16[10],
        aceg_mux4way16[11],
        aceg_mux4way16[12],
        aceg_mux4way16[13],
        aceg_mux4way16[14],
        aceg_mux4way16[15],
        bdfh_mux4way16[0],
        bdfh_mux4way16[1],
        bdfh_mux4way16[2],
        bdfh_mux4way16[3],
        bdfh_mux4way16[4],
        bdfh_mux4way16[5],
        bdfh_mux4way16[6],
        bdfh_mux4way16[7],
        bdfh_mux4way16[8],
        bdfh_mux4way16[9],
        bdfh_mux4way16[10],
        bdfh_mux4way16[11],
        bdfh_mux4way16[12],
        bdfh_mux4way16[13],
        bdfh_mux4way16[14],
        bdfh_mux4way16[15],
        sel2,
    )


class Mux8Way16Gate:
    def __init__(self):
        self.mux16_gate = Mux16Gate()
        self.mux4way16_gate = Mux4Way16Gate()

    def __call__(
        self,
        a: Bits16,
        b: Bits16,
        c: Bits16,
        d: Bits16,
        e: Bits16,
        f: Bits16,
        g: Bits16,
        h: Bits16,
        sel: Bits3,
    ) -> Bits16:
        aceg_mux4way16 = self.mux4way16_gate(a, c, e, g, [sel[0], sel[1]])
        bdfh_mux4way16 = self.mux4way16_gate(b, d, f, h, [sel[0], sel[1]])
        return self.mux16_gate(aceg_mux4way16, bdfh_mux4way16, sel[2])
